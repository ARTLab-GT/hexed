<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hexed: Geometry fitting</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hexed
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('geom_fitting.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Geometry fitting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Hexed provides a script, <a href="https://github.com/ARTLab-GT/hexed/blob/v0.1.1/script/hexed-fit-geom"><code>hexed-fit-geom</code></a>, for creating a smooth curve fit to a 2D geometry. Given a geometry file, it computes parametric polynomial curve as a least squares fit to the geometry points. A new geometry file is created that contains the smooth fit sampled at an arbitrary number of points, uniformly distributed in parameter space. This is useful when a geometry file is available but the resolution and/or precision is insufficient. The script is designed to work well for airfoils, but may also work for other geometries.</p>
<h1><a class="anchor" id="geom_fit_args"></a>
Arguments</h1>
<p><code>hexed-fit-geom</code> accepts the following command line arguments in any order: The following argument is required:</p><ul>
<li><b>file name:</b> Name of the file containing the input data points to which a smooth curve will be fitted. The file may have a <code>.geom</code> extension, in which case it must be in the <a href="https://github.gatech.edu/ARTLab/NASCART-GT">NASCART-GT</a> geometry file format (<a href="https://github.gatech.edu/ARTLab/NASCART-GT/blob/master/Examples/RAE2822_airfoil/RAE2822.geom">example</a>). Alternatively, it may have a <code>.txt</code> or <code>.csv</code> extension in which it must contain two columns of data representing \(x\) and \(y\) coordinates delimited by a single space or comma, respectively. This geometry should be smooth. In particular, for airfoils, the coordinates should start and end at the trailing edge, not the leading.</li>
</ul>
<p>The following arguments are optional:</p><ul>
<li><code>--uncluster-trailing</code>: If this argument is provided, the distribution of data points (not output sample points) in parametric space will be modified to avoid overfitting near the trailing edge. When defining an airfoil geometry, usually points should not be clustered near the trailing edge (although CFD mesh points should). Unfortunately, many people who create airfoil geometries appear tempted to do just that, and this option can help mitigate the resulting ill-conditioning of the curve fit. In any case, if you see the curve fit looking ugly near the trailing edge, consider trying this option.</li>
<li><code>--optimize</code>: If provided, distribution of data points in parametric space will be optimized to minimize the residual of the curve fit. This is designed to fix nonsmooth distributions of geometry points which can disrupt the polynomial interpolation. However, it is computationally expensive and not very robust, so only use it if necessary. If your curve fit is ugly and you notice rapid changes in the density of data points or irregular spacing, try this option.</li>
<li><code>--close_deform</code>: If provided, the output geometry will be smoothly deformed such that the first and last points match exactly. For airfoils, it is generally recommended that you use this option, especially if the trailing edge of your original geometry was closed. Note that by default, i.e. if none of <code>--close_deform</code>, <code>--close_segment</code>, or <code>--periodic</code> are provided, the output will not be exactly watertight.</li>
<li><code>--close_segment</code>: If provided, a segment will be added to connect the first and last points.</li>
<li><code>--quiet</code>: If provided, disable all command-line output and diagnostic plots.</li>
<li><code>--periodic</code>: Specifies that a trigonometric basis shall be used instead of a polynomial one. Use this if the end of your geometry curve is supposed to blend smoothly into the beginning (e.g., the starfish case). Do not use this if your geometry has an edge that coincides with the start/end of the curve (e.g., an airfoil).</li>
<li><code>--order=[n]</code>: Specifies an <code>[n]</code>th order curve fit. If not periodic, this is the number of polynomial coefficients. E.g. <code>--order=20</code> specifies a 19th-degree polynomial curve fit. If periodic, this is the number of cosine <em>and</em> sine functions that will be used. If not provided, defaults to 10.</li>
<li><code>--num-points=[n]</code>: Specifies that the output file should include <code>[n]</code> sample points. If not provided, defaults to 1000.</li>
</ul>
<h2><a class="anchor" id="autotoc_md0"></a>
Output</h2>
<p>Depending on the <code>--quiet</code> argument, some diagnostic information may be printed and plots may be displayed. An output geometry file will also be generated.</p>
<p>The first plot shows the curve fit in parametric space. That is, the resulting curve is defined by the coordinates \((x(t), y(t))\) where \(t\) is the abscissa of the plot and \(x\) and \(y\) are displayed on the ordinate. This is the space in which the least-squares fit is being computed. The distribution of sample points in parametric space can also be observed in this plot. If you can get past the abstractness of it, it is useful for troubleshooting the curve fit.</p>
<p>The second plot shows the curve fit in physical space. By this plot you can decide whether you're satisfied with the accuracy of the fit and the smoothness of the curve.</p>
<p>Finally, an output file named <code>[name]_fitted.csv</code> where <code>[name]</code> is the name of the input file with the extension removed will be generated. This will contain the curve-fit geometry in CSV format. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
