<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hexed: Hexed Interface Language</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hexed
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('hil.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Hexed Interface Language </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>The Hexed Interface Language (HIL) is a simple scripting language designed for interfacing with Hexed.</b> The Hexed project has two interpreters for it. There is the basic executable <code>hil</code>, which supports all the basic features described on this page, and there is the full program <a class="el" href="running.html#hexecute">hexecute</a> which also supports the <a class="el" href="parameters.html">Solver Parameters</a> that control the solver engine. Both interpreters can be run with no arguments, in which case they will start an interactive session, or with a single argument which is the path to a file containing HIL code. For examples of effective HIL scripting, see the <code>samples</code> directory.</p>
<p>Creating a whole scripting language just to interface with a CFD solver may seem excessive, but in fact it addresses some of my greatest frustrations with computational analysis. Most CFD solvers behave roughly like a washing machine: you adjust a few numbers, hit "go", and hope it gives you what you want. Usually it does, but, also like a washing machine, occasionally it starts spiraling out of control and requires manual intervention. This design is generally adequate to solve easy problems, but more challenging cases often call for more granular control, such as various types of CFL ramping, complex termination conditions, local/global time step switching, etc. Because there is an infinite variety of convoluted pathways a simulation might need to take, many solvers implement a multitude of ridiculously specific input parameters and/or require you to manually babysit a simulation and tweak parameters as it runs. We need to recognize that the real purpose of a CFD solver is to do things that you can't do &ndash; in particular, running iterations and standard file IO tasks. You are perfectly capable of deciding when and how many times to do these things, and in fact probably have opinions about it that differ from mine. To address general use cases, the solver should expose the fundamental capabilities directly and give you full control over the high-level iteration process. Of course, there should be builtin defaults to let you run basic cases without any significant programming, but you should be able to modify it arbitrarily without dealing with the solver's source code.</p>
<p>Initially, I thought the best way to achieve this ideal would be to implement bindings to <a class="el" href="namespacehexed.html">hexed</a> in an existing scripting language (namely Python). However, this turned out to have several problems:</p><ul>
<li>It required much more boilerplate code than I would have liked.</li>
<li>It made it much harder to debug memory errors, since binding systems tend to confuse memory checking tools.</li>
<li>It doesn't provide an easy way to implement user-defined callback functions (e.g. mesh refinement criteria, integral error metrics) that execute in parallel and at C++ speed.</li>
</ul>
<p>Technically, most CFD solvers <em>already</em> implement a custom scripting language, since input parameters are provided via a text file with custom syntax. Hexed simply adds support for operator expressions (<code>=</code>, <code>+</code>, <code>*</code>, <code>&amp;</code>, etc.) and basic control flow to enable you to construct cases with arbitrarily complex logic. The goal of the HIL is to be as simple as possible (both to implement and to learn) while providing all the functionality that you strictly need.</p>
<h1><a class="anchor" id="literals"></a>
Types and Literals</h1>
<p>Values in HIL have one of 3 types:</p><ul>
<li>Integer (32-bit signed)</li>
<li><a href="https://en.wikipedia.org/wiki/Floating-point_arithmetic">Float</a> (64-bit)</li>
<li>String</li>
</ul>
<p>Note that there is no dedicated boolean type. The integers 0 and 1 are used to represent logical true and false. If a value is used in an expression where a value of a different type is required, it is automatically converted if possible. Integers can be automatically converted to floats and both numeric types can be automatically converted to strings (the resulting string will be a human-readable representation of the number). If neither of the above conversions are possible, an exception is thrown.</p>
<p>You can create one of these values with a literal. Integer and float literals are the same as in any language. Strings are enclosed in <code>{}</code> instead of quotes to avoid exponential pileup of escape sequences in nested <a class="el" href="hil.html#Macros">Macros</a>. Matched pars of <code>{}</code> in strings are included literally. To include an unmatched <code>{</code> or <code>}</code> in a string, you can escape it with a <code>\</code>. To include a literal <code>\</code>, you must escape it with a second <code>\</code>. Strings can include newlines.</p>
<p>Examples:</p><ul>
<li><code>5</code> and <code>012</code> are integer literals.</li>
<li><code>1.0</code>, <code>4.</code>, <code>0.25</code>, <code>.01</code>, and <code>5e-4</code> are float literals.</li>
<li><code>{some chars}</code> is a string containing the characters <code>some chars</code>.</li>
<li><div class="fragment"><div class="line">{{string} \\ with \} special</div>
<div class="line">chars}</div>
</div><!-- fragment --> is a string containing the characters <div class="fragment"><div class="line">{string} \ with } special</div>
<div class="line">chars</div>
</div><!-- fragment --></li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>If you have never programmed in a low-level language before, beware of <a href="https://en.wikipedia.org/wiki/Integer_overflow">integer overflow</a>.</dd></dl>
<h1><a class="anchor" id="Operators"></a>
Operators</h1>
<p>HIL supports a variety of <em>operators</em>, which in this context means things that take in input values (operands), which can be literals or variable references, and produce an output. Some of these operators are implemented as functions in other languages, but HIL has no concept of a function. So-called unary operators are placed directly before their operand and binary operators are placed between their operands. The operators are listed below with their precedence. Operators with a lower precedence level are evaluated before those with a higher precedence number, and operators with the same precedence level are evaluated left-to-right. <code>()</code> can be used to override the precedence order and evaluate the enclosed expression(s) first.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Syntax   </th><th class="markdownTableHeadNone">Precedence level   </th><th class="markdownTableHeadNone">Operator name   </th><th class="markdownTableHeadNone">Operand types   </th><th class="markdownTableHeadNone">Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="21">unary   </td><td class="markdownTableBodyNone" rowspan="21">0   </td><td class="markdownTableBodyNone"><code>-</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">inverts sign    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>!</code>   </td><td class="markdownTableBodyNone">integer   </td><td class="markdownTableBodyNone">logical <em>not</em> (<code>1</code>, if operand is zero, else <code>0</code>)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>#</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">evaluates size of string    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>sqrt</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">square root    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exp</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">exponential    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>log</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">natural logarithm    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>sin</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">sine    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>cos</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">cosine    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>tan</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">tangent    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asin</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">inverse sine    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>acos</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">inverse cosine    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>atan</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">inverse tangent    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>floor</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone"><a href="https://mathworld.wolfram.com/FloorFunction.html">floor function</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ceil</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone"><a href="https://mathworld.wolfram.com/CeilingFunction.html">ceiling function</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>round</code>   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">rounds to nearest integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>abs</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">absolute value    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>read</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">operand is a file path; returns the file contents as a string    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>print</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">prints to stdout (without adding a newline) and evaluates to the empty string    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>println</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">prints to stdout and then prints a newline (like the Python <code>print</code> function) and evaluates to the empty string    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>shell</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">executes the operand in the system shell and returns the return code (integer)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>$</code>   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone"><a class="el" href="hil.html#Macros">macro substitution</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" rowspan="16">binary   </td><td class="markdownTableBodyNone" rowspan="2">1   </td><td class="markdownTableBodyNone"><code>^</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">raises left operand to power of right operand    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>#</code>   </td><td class="markdownTableBodyNone">string-integer   </td><td class="markdownTableBodyNone">returns the <em>i</em> th character of the left operand as a string where <em>i</em> is the right operand    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" rowspan="3">2   </td><td class="markdownTableBodyNone"><code>%</code>   </td><td class="markdownTableBodyNone">integer   </td><td class="markdownTableBodyNone">modulo    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">division    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>*</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">multiplication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="2">3   </td><td class="markdownTableBodyNone"><code>-</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">subtraction    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>+</code>   </td><td class="markdownTableBodyNone">any   </td><td class="markdownTableBodyNone">For numeric-numeric, addition. For strings, concatenation.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="6">4   </td><td class="markdownTableBodyNone"><code>==</code>   </td><td class="markdownTableBodyNone">any   </td><td class="markdownTableBodyNone">Evaluates to integer <code>1</code> if operands are equal, otherwise <code>0</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>!=</code>   </td><td class="markdownTableBodyNone">any   </td><td class="markdownTableBodyNone">Evaluates to integer <code>1</code> if operands are unequal, otherwise <code>0</code> (including if both operands are NaN).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>&gt;=</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone"><code>1</code> if left operand is greater than or equal to right, else <code>0</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>&lt;=</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone"><code>1</code> if left operand is less than or equal to right, else <code>0</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>&gt;</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone"><code>1</code> if left operand is greater than right, else <code>0</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>&lt;</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone"><code>1</code> if left operand is less than right, else <code>0</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="2">5   </td><td class="markdownTableBodyNone"><code>&amp;</code>   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">logical <em>and</em> (<code>0</code> if either operand is <code>0</code>, else <code>1</code>)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">|   </td><td class="markdownTableBodyNone">integer, float   </td><td class="markdownTableBodyNone">logical <em>or</em> (<code>0</code> if both operands are <code>0</code>, else <code>1</code>)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone"><code>=</code>   </td><td class="markdownTableBodyNone">any   </td><td class="markdownTableBodyNone"><a class="el" href="hil.html#variables">Assigns</a> the value of the left operand to the right operand, which must be a variable name. Evaluates to the value of the right operand.   </td></tr>
</table>
<p><b>Notes:</b></p><ul>
<li>If an operator can be interpreted as unary or binary, it is interpreted as binary.</li>
<li>All operators except binary <code>#</code> require the types of their operands to be the same.</li>
<li>The left operand of binary <code>#</code> must be a string and the right must be an integer.</li>
<li>Unless otherwise specified, the return type of each operator is the same as its operands.</li>
<li>An operator expression which is not nested inside another expression is called a <em>statement</em>.</li>
<li>A statement is terminated by either a newline or a <code>;</code> (as long as this terminating character is not inside a string literal).</li>
</ul>
<h1><a class="anchor" id="variables"></a>
Variables and Assignment</h1>
<p>The <code>=</code> operator can be used to assign a value to a variable. Variable names may contain letters (case-sensitive), digits, and underscores, but cannot start with a digit. Variables are created and their type determined when they are assigned a value; variables need not be declared. Once a variable is created, its value can be referenced in subsequent expressions and its type cannot be changed. Attempting to assign a value to a variable of a different type will produce an exception, with the exception that an integer may be assigned to a float (it will be automatically converted and the variable will continue to be a float). However, HIL is technically dynamically typed since the type that a variable can depend on the path a program takes at runtime.</p>
<p><a class="anchor" id="heisenberg"></a>HIL comes with some builtin variables which are already defined at the start of your program, and special variables whose value influences the behavior of the solver (i.e. input parameters). There are also some variables, which I call <em>Heisenberg variables</em> that produce side effects when you evaluate them. You can't assign to these variables, and exactly what happens when you evaluate them is specially defined for each one. They are called "Heisenberg" because the fact that observing their value changes the state of the program is reminiscent of the collapse of the wave function in quantum mechanics. See <a class="el" href="hil.html#builtins">Builtin Variables</a> and <a class="el" href="parameters.html">Solver Parameters</a> for a list of such variables.</p>
<p>Technically, an assignment statement is an expression which evaluates to the value of the right-hand-side. Also, a sequence of statements (assignment or otherwise) evaluates to the value of the last one. So, for example, </p><div class="fragment"><div class="line">x = (println {hello world!}; y = z = 0; 15)</div>
</div><!-- fragment --><p> prints <code>hello world!</code>, then assigns 0 to both <code>y</code> and <code>z</code>, then assigns 15 to <code>x</code>. However, these technicalities are unlikely to be relevant to using Hexed.</p>
<h1><a class="anchor" id="Macros"></a>
Macros</h1>
<p>In HIL, transfer of control flow (e.g. conditionals, iteration, subroutines, recursion) is accomplished by a macro substitution mechanic. HIL is an interpreted language, meaning that the text of the program is executed as it is parsed. If the character <code>$</code> is encountered while parsing (not inside a string literal), it must be immediately followed by a string value (literal, variable, or expression). This string is then prepended to the remaining text of the program. For example, suppose you have set <code>my_string = {1 + 1}</code> at some point in the program. Then <code>x = $my_string</code> is equivalent to <code>x = 1 + 1</code>. This can be done recursively. For example, <code>macro = {println {infinite loop!}; $macro}; $macro</code> will print "infinite loop!" repeatedly until you kill the process. The ability for a program to manipulate its own text is an extremely versatile tool which can be used to emulate pretty much all of the control flow mechanics that most languages explicitly implement, if you're willing to think a little harder about it. See <a class="el" href="hil.html#Idioms">Idioms</a> below for examples.</p>
<h1><a class="anchor" id="builtins"></a>
Builtin Variables</h1>
<p>The HIL includes a number of variables, both ordinary and Heisenberg, which are automatically defined at the start of your program. This section lists the builtin variables that are simply useful for scripting but not directly related to the input and output functions of the CFD solver itself. See <a class="el" href="parameters.html">Solver Parameters</a> for definitions of variables that directly interact with the solver. In addition to the below variables, there are also some internal variables used in the implementation of some of the builtin macros. The names of these variables always start with <code>hexed_</code> to avoid naming conflicts.</p>
<dl class="section attention"><dt>Attention</dt><dd>You are advised not to create, write to, or depend on the value of any variables whose names begin with <code>hexed_</code> &ndash; such variables are private to the implementation by convention.</dd></dl>
<h2><a class="anchor" id="builtin_list"></a>
List of Builtin Variables</h2>
<hr  />
 <h3><a class="anchor" id="hil_constants"></a>
Physical/mathematical constants</h3>
<p>All of the quantities in the <code><a class="el" href="namespacehexed_1_1constants.html" title="Mathematical and physical constants.">hexed::constants</a></code> namespace are included as float variables. The names are the same as in the C++ library, without the namespace. So if you want Boltzmann's constant, for instance, which in C++ would be <code><a class="el" href="namespacehexed_1_1constants.html#a32f69cf59954f9cbb41c44818231c3cd">hexed::constants::boltzmann</a></code>, you just have to write <code>boltzmann</code>.</p>
<hr  />
 <h3><a class="anchor" id="huge"></a>
huge</h3>
<p><b>type:</b> float <br  />
Maximum representable float value (equal to <code>std::numeric_limits&lt;double&gt;::max</code>).</p>
<hr  />
 <h3><a class="anchor" id="newline"></a>
newline</h3>
<p><b>type:</b> string <br  />
A string containing a single newline character, so you can write strings containing newlines on a single line.</p>
<hr  />
 <h3><a class="anchor" id="false"></a>
false</h3>
<p><b>type:</b> integer <br  />
Alias for the integer 0, for more readable logical operations</p>
<hr  />
 <h3><a class="anchor" id="true"></a>
true</h3>
<p><b>type:</b> integer <br  />
Alias for the integer 1, for more readable logical operations.</p>
<hr  />
 <h3><a class="anchor" id="loop"></a>
loop</h3>
<p><b>type:</b> string <br  />
Macro which makes iteration more convenient, especially if you need nested loops. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="hil.html#Iteration">Iteration</a></dd></dl>
<hr  />
 <h3><a class="anchor" id="repl"></a>
repl</h3>
<p><b>type:</b> string <br  />
Macro which starts a Read-Evaluate-Print Loop (a.k.a. an interactive session). Statements executed in the REPL will have read/write access to the namespace of the program.</p>
<hr  />
 <h3><a class="anchor" id="quit"></a>
quit</h3>
<p><b>type:</b> string <br  />
Macro which, when invoked from the REPL, quits the REPL. The program which invoked <a class="el" href="hil.html#repl">repl</a> will continue executing. This is different from <a class="el" href="hil.html#exit">exit</a> because it terminates only the REPL, not the interpreter itself.</p>
<hr  />
 <h3><a class="anchor" id="ask"></a>
ask</h3>
<p><b>type:</b> Heisenberg string <br  />
Queries stdin (command line input) and gets characters until a newline is received. Evaluates to a string containing those characters.</p>
<hr  />
 <h3><a class="anchor" id="exit"></a>
exit</h3>
<p><b>type:</b> Heisenberg string <br  />
Terminates the HIL interpreter and evaluates to an empty string. This is different from <a class="el" href="hil.html#quit">quit</a> in that it can be invoked from anywhere (not just the REPL) and even if it is invoked from the REPL, statements after the <a class="el" href="hil.html#repl">repl</a> invocation will not be executed (because it terminates the whole interpreter).</p>
<hr  />
 <h3><a class="anchor" id="throw"></a>
throw</h3>
<p><b>type:</b> Heisenberg string <br  />
Throws an exception in the C++ implementation of HIL. Potentially useful if the C++ code contains subsequent statements after the invocation of the HIL interpreter which you don't want to execute.</p>
<hr  />
<h1><a class="anchor" id="Idioms"></a>
Idioms</h1>
<p>HIL is missing some features that nearly every programming language has because there are workarounds and I am reluctant to implement (and require you to understand) anything that we can get away without. However, since these workarounds may not be obvious, this section gives some examples so that you know them when you see them or need them.</p>
<h2><a class="anchor" id="Comments"></a>
Comments</h2>
<p>To include text addressed at a human reader which does not affect the behavior of the program, create a string literal and don't assign it to anything. Comments can be placed on the same line as a statement if you terminate the statement with a <code>;</code>. For example: </p><div class="fragment"><div class="line">{this comment is on its own line</div>
<div class="line">and can take up multiple lines if you like}</div>
<div class="line">i = 0; {this is an inline comment}</div>
</div><!-- fragment --><h2><a class="anchor" id="Conditionals"></a>
Conditionals</h2>
<p>Conditional jumps (like <code>if</code> and <code>switch</code> statements) can be accomplished with macro substitution and integer-string conversion. For example, you can emulate the behavior of a basic if-else statement like this: </p><div class="fragment"><div class="line">case0 = {println {predicate is false}}</div>
<div class="line">case1 = {println {predicate is true}}</div>
<div class="line">$$({case} + (predicate != 0))</div>
</div><!-- fragment --><p> Note the two <code>$</code> operators in the last statement: the first converts the string containing the variable name to the value of the variable, which is a string containing code, and the second executes the code in the string. For example, if <code>predicate</code> is equal to 0, then the above example plays out as follows:</p><ol type="1">
<li><code>({case} + (predicate != 0))</code> evaluates to <code>{case0}</code></li>
<li>the first <code>$</code> converts <code>{case0}</code> to <code>case0</code></li>
<li><code>case0</code> evaluates to <code>{println {predicate is false}}</code>.</li>
<li>The second <code>$</code> converts <code>{println {predicate is false}}</code> to <code>println {predicate is false}</code></li>
<li><code>println {predicate is false}</code> is then executed, resulting in <code>predicate is false</code> being printed to the console.</li>
</ol>
<p>The above example conditional is essentially equivalent to the following Python code: </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> predicate:</div>
<div class="line">    print(<span class="stringliteral">&quot;predicate is true&quot;</span>)</div>
<div class="line"><span class="keywordflow">else</span>:</div>
<div class="line">    print(<span class="stringliteral">&quot;predicate is false&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="Iteration"></a>
Iteration</h2>
<p>Iteration (like <code>while</code> and <code>for</code> loops) can be accomplished with recursive macros. If you're concerned about memory overhead, remember that macro substitution does not create a new scope; it literally inserts the text of the macro at the start of the remaining program text (and the text of statements that have already been processed is deleted). Thus tail recursion is inherently optimized. If your recursive macro contains trailing characters, these will add up over many iterations, but the program text happens to be allocated on the heap, so stack overflow in particular will not be an issue. With that in mind, here is an example of a basic for-loop equivalent: </p><div class="fragment"><div class="line">i = 0</div>
<div class="line">iterate = {</div>
<div class="line">    case0 = {}</div>
<div class="line">    case1 = {</div>
<div class="line">        println({loop iteration } + i)</div>
<div class="line">        i = i + 1</div>
<div class="line">        $iterate}</div>
<div class="line">    $$({case} + (i &lt; 10))}</div>
<div class="line">$iterate</div>
</div><!-- fragment --><p> Note that there are no trailing newlines at the end of the macro strings, which would pile up and consume memory if there were many iterations. The above loop would print: </p><div class="fragment"><div class="line">loop iteration 0</div>
<div class="line">loop iteration 1</div>
<div class="line">loop iteration 2</div>
<div class="line">loop iteration 3</div>
<div class="line">loop iteration 4</div>
<div class="line">loop iteration 5</div>
<div class="line">loop iteration 6</div>
<div class="line">loop iteration 7</div>
<div class="line">loop iteration 8</div>
<div class="line">loop iteration 9</div>
</div><!-- fragment --><p>However, the above method of iteration has two inconveniences. It is a little more verbose than I would prefer, and if you need nested loops you will need to explicitly give the macro variables different names to avoid conflicts. So, the preferred method is to use the builtin macro <a class="el" href="hil.html#loop">loop</a>, which streamlines the process and can be nested (internally, it counts the number of nested levels and incorporates this into its variable names). To use it, define your termination condition in a variable named <code>while</code> and the loop body in a variable named <code>do</code>. Using <a class="el" href="hil.html#loop">loop</a>, the above example would look like: </p><div class="fragment"><div class="line">i = 0</div>
<div class="line">while = {i &lt; 10}</div>
<div class="line">do = {</div>
<div class="line">    println({loop iteration } + i)</div>
<div class="line">    i = i + 1</div>
<div class="line">}</div>
<div class="line">$loop</div>
</div><!-- fragment --><p> Note that this is a while loop, not a for loop, so you still have to manually define and increment your index variable.</p>
<h2><a class="anchor" id="Functions"></a>
Functions</h2>
<p>HIL does not have a concept of a function as it exists in ordinary languages. However, you can accomplish basically the same things with macros, as long as you're okay with making the arguments and return value(s) global variables. For example, here is a "function" to compute an integer logarithm \( \lceil \log_{\mathtt{log\_base}} \mathtt{log\_arg} \rceil \). It's basically a port of <code><a class="el" href="namespacehexed_1_1math.html#aa22c33a8526443106a5fb9755fd74f3e" title="Integer logarithm.">hexed::math::log</a></code>. Of course, you could also implement it as <code>ceil(log log_arg / log log_base)</code>, but where's the fun in that? </p><div class="fragment"><div class="line">int_log = {</div>
<div class="line">    log_return = 0</div>
<div class="line">    compare = 1</div>
<div class="line">    while = {compare &lt; log_arg}</div>
<div class="line">    do = {</div>
<div class="line">        log_return = log_return + 1</div>
<div class="line">        compare = compare*log_base</div>
<div class="line">    }</div>
<div class="line">    $loop</div>
<div class="line">}</div>
</div><!-- fragment --><p> You would call it like this: </p><div class="fragment"><div class="line">log_base = 10</div>
<div class="line">log_arg = 10^5</div>
<div class="line">$int_log</div>
<div class="line">println log_return</div>
</div><!-- fragment --><p> The above code would print <code>5</code>. Admittedly, this is an extremely clunky excuse for a function, especially since it you have to avoid naming conflicts between the parameters of different functions. However, the number of HIL use cases that are complex enough to require functions should be exceedingly small. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
